<?xml version="1.0" encoding="UTF-8"?>
<project name="module_woped" default="compile.module.woped">
  <dirname property="module.woped.basedir" file="${ant.file.module_woped}"/>
  
  <property name="module.jdk.home.woped" value="${project.jdk.home}"/>
  <property name="module.jdk.bin.woped" value="${project.jdk.bin}"/>
  <property name="module.jdk.classpath.woped" value="${project.jdk.classpath}"/>
  
  <property name="compiler.args.woped" value="-encoding UTF-8 -source 8 -target 8 ${compiler.args}"/>
  
  <property name="woped.output.dir" value="${module.woped.basedir}/out/production/WoPeD"/>
  <property name="woped.testoutput.dir" value="${module.woped.basedir}/out/test/WoPeD"/>
  
  <path id="woped.module.bootclasspath">
    <!-- Paths to be included in compilation bootclasspath -->
  </path>
  
  <path id="woped.module.production.classpath">
    <path refid="${module.jdk.classpath.woped}"/>
    <path refid="library.woped-sprachentext-editor_7_0.1.classpath"/>
  </path>
  
  <path id="woped.runtime.production.module.classpath">
    <pathelement location="${woped.output.dir}"/>
    <path refid="library.woped-sprachentext-editor_7_0.1.classpath"/>
  </path>
  
  <path id="woped.module.classpath">
    <path refid="${module.jdk.classpath.woped}"/>
    <pathelement location="${woped.output.dir}"/>
    <path refid="library.woped-sprachentext-editor_7_0.1.classpath"/>
  </path>
  
  <path id="woped.runtime.module.classpath">
    <pathelement location="${woped.testoutput.dir}"/>
    <pathelement location="${woped.output.dir}"/>
    <path refid="library.woped-sprachentext-editor_7_0.1.classpath"/>
  </path>
  
  
  <patternset id="excluded.from.module.woped">
    <patternset refid="ignored.files"/>
    <exclude name="lib/jwnl14-rc2/**"/>
    <exclude name="lib/jwnl14-rc2/lib/**"/>
    <exclude name="lib/jwnl14-rc2/sql/**"/>
    <exclude name="lib/jwnl14-rc2/src/**"/>
    <exclude name="lib/jwnl14-rc2/src/com/**"/>
    <exclude name="lib/jwnl14-rc2/src/com/p21csi/**"/>
    <exclude name="lib/jwnl14-rc2/src/com/p21csi/lib/**"/>
    <exclude name="lib/jwnl14-rc2/src/com/p21csi/lib/net/**"/>
    <exclude name="lib/jwnl14-rc2/src/com/p21csi/lib/net/didion/**"/>
    <exclude name="lib/jwnl14-rc2/src/com/p21csi/lib/net/didion/jwnl/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/data/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/data/list/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/data/relationship/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/util/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/util/cache/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/util/factory/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/princeton/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/princeton/data/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/princeton/file/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/utilities/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/dictionary/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/dictionary/file/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/dictionary/morph/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/dictionary/database/**"/>
    <exclude name="lib/jwnl14-rc2/src/net/didion/jwnl/dictionary/file_manager/**"/>
    <exclude name="lib/jwnl14-rc2/src/test/**"/>
    <exclude name="lib/jwnl14-rc2/src/test/net/**"/>
    <exclude name="lib/jwnl14-rc2/src/test/net/didion/**"/>
    <exclude name="lib/jwnl14-rc2/src/test/net/didion/jwnl/**"/>
    <exclude name="lib/jwnl14-rc2/src/test/net/didion/jwnl/test/**"/>
    <exclude name="lib/jwnl14-rc2/src/test/net/didion/jwnl/test/mysql/**"/>
    <exclude name="lib/jwnl14-rc2/src/test/net/didion/jwnl/test/generic/**"/>
    <exclude name="lib/jwnl14-rc2/src/test/net/didion/jwnl/test/version/**"/>
    <exclude name="lib/jwnl14-rc2/config/**"/>
  </patternset>
  
  <patternset id="excluded.from.compilation.woped">
    <patternset refid="excluded.from.module.woped"/>
  </patternset>
  
  <path id="woped.module.sourcepath">
    <dirset dir="${module.woped.basedir}">
      <include name="WoPeD-Process2Text"/>
    </dirset>
  </path>
  
  
  <target name="compile.module.woped" depends="compile.module.woped.production,compile.module.woped.tests" description="Compile module WoPeD"/>
  
  <target name="compile.module.woped.production" depends="register.custom.compilers" description="Compile module WoPeD; production classes">
    <mkdir dir="${woped.output.dir}"/>
    <javac2 destdir="${woped.output.dir}" debug="${compiler.debug}" nowarn="${compiler.generate.no.warnings}" memorymaximumsize="${compiler.max.memory}" fork="true" executable="${module.jdk.bin.woped}/javac">
      <compilerarg line="${compiler.args.woped}"/>
      <bootclasspath refid="woped.module.bootclasspath"/>
      <classpath refid="woped.module.production.classpath"/>
      <src refid="woped.module.sourcepath"/>
      <patternset refid="excluded.from.compilation.woped"/>
    </javac2>
    
    <copy todir="${woped.output.dir}">
      <fileset dir="${module.woped.basedir}/WoPeD-Process2Text">
        <patternset refid="compiler.resources"/>
        <type type="file"/>
      </fileset>
    </copy>
  </target>
  
  <target name="compile.module.woped.tests" depends="register.custom.compilers,compile.module.woped.production" description="compile module WoPeD; test classes" unless="skip.tests"/>
  
  <target name="clean.module.woped" description="cleanup module">
    <delete dir="${woped.output.dir}"/>
    <delete dir="${woped.testoutput.dir}"/>
  </target>
</project>